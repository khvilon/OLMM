<!doctype html>
<html lang="en">
<head>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <link rel="stylesheet" href="OpenLayers/css/ol.css" type="text/css">
    <script src="OpenLayers/build/ol.js" type="text/javascript"></script>
    <script src="init.js" type="text/javascript"></script>
    <script src="presets/styles.js" type="text/javascript"></script>
    <script src="presets/layers.js" type="text/javascript"></script>
    <script src="presets/sources.js" type="text/javascript"></script>

    <style>
        .map {
            height: 100%;
            width: 100%;
        }
    </style>

    <title>my example</title>
</head>
<body>
<div id="map" class="map"></div>
<script type="text/javascript">

    sel = function (id) {
        console.log(id);
    }

    var olmm = new OLMM();
    olmm.init('map', sel);

    var graph = [
        ["800107", "55.72097", "37.55856", "55.72085", "37.559"], ["800114", "55.7211", "37.55806", "55.72097", "37.55856"], ["794651", "55.7227", "37.55516", "55.72261", "37.55502"], ["282374", "55.72277", "37.55535", "55.72271", "37.55551"], ["187088", "55.72277", "37.55535", "55.72266", "37.55527"], ["794652", "55.72277", "37.55535", "55.7227", "37.55516"], ["187089", "55.72266", "37.55527", "55.72256", "37.55515"], ["540665", "55.72251", "37.55528", "55.72264", "37.55542"], ["540663", "55.72264", "37.55542", "55.72271", "37.55551"], ["406547", "55.72107", "37.55902", "55.72129", "37.55836"], ["406548", "55.72129", "37.55836", "55.72146", "37.55773"], ["406549", "55.72146", "37.55773", "55.72175", "37.55653"], ["408601", "55.72234", "37.55529", "55.72246", "37.55541"], ["954289", "55.72274", "37.55588", "55.72285", "37.55554"], ["1113141", "55.72106", "37.55773", "55.72085", "37.559"], ["263961", "55.72307", "37.55503", "55.72316", "37.55482"], ["251022", "55.72285", "37.55554", "55.72294", "37.55533"], ["794653", "55.72285", "37.55554", "55.72277", "37.55535"], ["925169", "55.72085", "37.559", "55.72075", "37.55936"], ["408599", "55.72246", "37.55541", "55.72254", "37.5555"], ["954288", "55.72263", "37.55624", "55.72274", "37.55588"], ["263959", "55.72305", "37.55472", "55.72291", "37.55503"], ["263960", "55.72294", "37.55533", "55.72307", "37.55503"], ["263958", "55.72291", "37.55503", "55.72277", "37.55535"], ["304748", "55.72122", "37.55824", "55.72156", "37.55691"], ["286617", "55.72271", "37.55551", "55.72262", "37.5558"], ["560752", "55.72271", "37.55551", "55.72285", "37.55554"], ["286618", "55.72254", "37.5555", "55.72262", "37.5558"], ["408602", "55.72254", "37.5555", "55.72271", "37.55551"], ["618168", "55.72262", "37.5558", "55.72257", "37.55595"], ["304745", "55.72095", "37.55923", "55.72107", "37.55882"], ["406545", "55.72095", "37.55923", "55.72107", "37.55902"], ["304747", "55.72107", "37.55882", "55.72114", "37.55855"], ["304746", "55.72114", "37.55855", "55.72122", "37.55824"], ["618167", "55.72257", "37.55595", "55.72254", "37.55606"]]

    var data_to_show_points_0 = {
        "point_num": 0, "proj": [{
            "lat": 55.72,
            "lon": 37.56,
            "geometry": [{
                "type": "LineString",
                "coordinates": [[55.72499371540099, 37.55020063875089],
                    [55.72503, 37.55016],
                    [55.72527009512485, 37.5499079001189]]
            }
            ],
            "arc_id": "470186"
        },
            {
                "lat": 55.72503,
                "lon": 37.55016,
                "geometry": [{
                    "type": "LineString",
                    "coordinates": [[55.72503, 37.55016],
                        [55.72527009512485, 37.5499079001189]]
                }
                ],
                "arc_id": "470187"
            }]
    }
    var data_to_show_points_1 = {
        "point_num": 1, "proj": [{
            "lat": 56.72499371540099,
            "lon": 38.55020063875089,
            "geometry": [{
                "type": "LineString",
                "coordinates": [[55.72499371540099, 37.55020063875089],
                    [55.72503, 37.55016],
                    [55.72527009512485, 37.5499079001189]]
            }
            ],
            "arc_id": "470186"
        },
            {
                "lat": 59.72503,
                "lon": 39.55016,
                "geometry": [{
                    "type": "LineString",
                    "coordinates": [[55.72503, 37.55016],
                        [55.72527009512485, 37.5499079001189]]
                }
                ],
                "arc_id": "470187"
            }]
    }
    var pnts = [
        {
            "lat": 55.72,
            "lon": 37.56,
            "rot": 326,
            "good_proj": {
                "lat": 55.72499371540099,
                "text": "arc_id 470186 p[55.724993,37.5502] distance=0.09 az[p=5.69 arc=5.72] dA=0.0297 pd2=0.197364731777 pa2=0.149697956959 prob=0.183064699331",
                "lon": 37.55020063875089,
                "geometry": [{
                    "type": "LineString",
                    "coordinates": [[55.72499371540099, 37.55020063875089], [55.72503, 37.55016], [55.72527009512485, 37.5499079001189]]
                }],
                "arc_id": "470186"
            },
            "mm_proj": {
                "lat": 55.72499371540099,
                "text": "arc_id 470186 p[55.724993,37.5502] distance=0.09 az[p=5.69 arc=5.72] dA=0.0297 pd2=0.197364731777 pa2=0.149697956959 prob=0.183064699331",
                "lon": 37.55020063875089,
                "geometry": [{
                    "type": "LineString",
                    "coordinates": [[55.72499371540099, 37.55020063875089], [55.72503, 37.55016], [55.72527009512485, 37.5499079001189]]
                }],
                "arc_id": "470186"
            },
            "coords": [4180069.143185581, 7503863.198874875]
        },

        {
            "lat": 55.725,
            "lon": 37.5499,
            "rot": 326,
            "good_proj": {
                "lat": 55.72399371540099,
                "text": "arc_id 470186 p[55.724993,37.5502] distance=0.09 az[p=5.69 arc=5.72] dA=0.0297 pd2=0.197364731777 pa2=0.149697956959 prob=0.183064699331",
                "lon": 37.55020063875089,
                "geometry": [{
                    "type": "LineString",
                    "coordinates": [[55.72499371540099, 37.55020063875089], [55.72503, 37.55016], [55.72527009512485, 37.5499079001189]]
                }],
                "arc_id": "470186"
            },
            "mm_proj": {
                "lat": 55.72499371540099,
                "text": "arc_id 470186 p[55.724993,37.5502] distance=0.09 az[p=5.69 arc=5.72] dA=0.0297 pd2=0.197364731777 pa2=0.149697956959 prob=0.183064699331",
                "lon": 37.53020063875089,
                "geometry": [{
                    "type": "LineString",
                    "coordinates": [[55.72499371540099, 37.55020063875089], [55.72503, 37.55016], [55.72527009512485, 37.5499079001189]]
                }],
                "arc_id": "470186"
            },
            "coords": [4180069.143185581, 7503863.198874875]
        }

    ]

    data_to_set = {
        "point_num": 1, "proj": {
            "lat": 59.72503,
            "lon": 39.55016,
            "geometry": [{
                "type": "LineString",
                "coordinates": [[55.72503, 37.55016],
                    [55.72527009512485, 37.5499079001189]]
            }
            ],
            "arc_id": "470187"
        }
    }

    //olmm.add_graph(graph);
    olmm.draw_points(pnts);
    olmm.show_points(data_to_show_points_0);
    olmm.show_points(data_to_show_points_1);
    //olmm.show_point_info(data_to_show_points_0);
    //olmm.delete_projs();
    //olmm.set_good_arc(data_to_set);

</script>
</body>
</html>
